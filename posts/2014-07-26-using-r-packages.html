<!DOCTYPE html>
<html lang="zh-cn">
<head>

<meta name="description" contents="R"/>
<meta name="description" contents=" "/>
<meta name="description" contents="语"/>
<meta name="description" contents="言"/>
<meta name="description" contents="中"/>
<meta name="description" contents=" "/>
<meta name="description" contents="p"/>
<meta name="description" contents="a"/>
<meta name="description" contents="c"/>
<meta name="description" contents="k"/>
<meta name="description" contents="a"/>
<meta name="description" contents="g"/>
<meta name="description" contents="e"/>
<meta name="description" contents=" "/>
<meta name="description" contents="的"/>
<meta name="description" contents="相"/>
<meta name="description" contents="关"/>
<meta name="description" contents="操"/>
<meta name="description" contents="作"/>
<meta name="description" contents="，"/>
<meta name="description" contents="p"/>
<meta name="description" contents="a"/>
<meta name="description" contents="c"/>
<meta name="description" contents="k"/>
<meta name="description" contents="a"/>
<meta name="description" contents="g"/>
<meta name="description" contents="e"/>
<meta name="description" contents="的"/>
<meta name="description" contents="安"/>
<meta name="description" contents="装"/>
<meta name="description" contents="、"/>
<meta name="description" contents="载"/>
<meta name="description" contents="入"/>
<meta name="description" contents="与"/>
<meta name="description" contents="移"/>
<meta name="description" contents="除"/>

<meta name="tags" contents="R"/>
    <title>rainy</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- Bootstrap core css -->
    <link rel="stylesheet" href="/theme/css/bootstrap-paper.min.css">
    <link rel="stylesheet" href="/theme/css/font-awesome.min.css">
    <link rel="stylesheet" href="/theme/css/style.css">

    <!-- Jquery before bootstrap.js -->
    <script src="/theme/js/jquery.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>


</head>

<body id="index">
<div class="container main-container">
    <div class="row main-row">
        <section id="side-bar" class="col-md-4">
            <ul class="name-card">
                <li>
                    <a href="https://github.com/rainy-im" title="My Github">
                        <img class="avatar" src="https://avatars0.githubusercontent.com/u/3953966?v=3&s=460"/>
                    </a>
                </li>
                <li class="name-card-name"><b>rainy.im</b></li>
                <li class="name-card-slogan"><i>I thought, therefore I write.</i></li>
                <li class="divider"></li>
            </ul>
            <form class="side-search" onsubmit="return search()">
                <input id="search-query" type="text" class="form-control" placeholder="Search">
            </form>
            <ul class="nav nav-sidebar">
                <li><a href="/">Home</a></li>
                <li><a href="/archives.html">Archive</a></li>
                <li><a href="/categories.html">Category</a></li>
                <li><a href="/tags.html">Tags</a></li>
                <li><a href="">RSS</a></li>
            </ul>
            <ul class="sns">
                <li>
                    <a href="mailto:sniky.hack@gmail.com" title="email" class="fa fa-send"></a>
                </li>
                <li>
                    <a href="http://weibo.com/myaplysia" title="Weibo" alt="Weibo" class="fa fa-weibo"></a>
                </li>
                <li>
                    <a href="https://github.com/rainy-im" title="Github" alt="Github" class="fa fa-github"></a>
                </li>
            </ul>
        </section>
        <!--left side-->
        <section class="col-md-8 col-sm-12 col-xs-12">
<section id="content" class="body col-md-8">
    <ul class="post-info breadcrumb">
        <li><a href="/">Home</a></li>
        <li>
            <a href="/category/yu-yan.html" title="语言" alt="语言">
                语言
            </a>
        </li>
        <li class="active">
            六 26 七月 2014
        </li>
    </ul>
    <!-- /.post-info -->

    <header>
        <h4 class="entry-title">
            <a href="http://defsniky.com/posts/2014-07-26-using-r-packages.html" rel="bookmark"
               title="Permalink to R 语言 package 基本操作">R 语言 package 基本操作</a>
        </h4>
    </header>

    <div class="entry-content">
        <p>小星星同学借口说在学习《Learning statistics with R》的时候被安装 package 卡住了，导致后面的学习存在很多障碍，由于我也很长时间没有接触 R，有些生疏了，所以没办法马上解决，但是我觉得几个 package 不应该太大，安装出问题一定是打开的姿势不对。</p>
<p>首先来说，package 或者是 library 之类的“包”，是所有语言或者 projects 中非常重要的一部分核心内容，它们是所有先辈们智慧的结晶，这些 package 往往封装了许多底层或者通用的功能，让我们不必重造太多轮子。然而在复杂的项目中 package 的安装或者载入可能会伴随很多依赖性、兼容性等问题，优秀的项目往往提供相应的包管理工具来解决这些问题，同时也可以简化用户的操作。R 语言中 package 的下载、安装同样有两种方式，用<code>install.package()</code>命令自动下载安装或者手动下载压缩包并手动载入，两者各有利弊，自动载入方便快捷，不需要对逐一安装层层依赖，但是容易对新手（如小星星同学）产生不可知的后果，一旦出错就不知道究竟发生了什么，该怎么办，最后只好卡在这里一动不动 <code>-,-</code></p>
<p>晚上我自己试了一下，安装了所需要的 <code>lsr, psych, car</code> 三个 package，耗时大概十分钟不到...，下面是总结的一些基本操作：</p>
<h4>1. 查看当前电脑已经安装过的 package:</h4>
<div class="highlight"><pre><span class="p">.</span><span class="n">packages</span><span class="p">(</span><span class="n">TRUE</span><span class="p">)</span>
<span class="c1">// 返回结果大致如下：</span>
<span class="c1">// [1] &quot;alr4&quot;        &quot;base&quot;        &quot;bitops&quot;      &quot;boot&quot; ...</span>
<span class="c1">// ...</span>
<span class="c1">// 刚开始大概有 30+</span>

<span class="n">library</span><span class="p">()</span>
<span class="c1">// 会返回每个 package 更为详细的解释</span>
</pre></div>


<h4>2. 查看已经加载的 package:</h4>
<div class="highlight"><pre><span class="c1">// 已经安装过的 package 并不代表会加载到 R 语言的运行环境中，可以通过如下命令(函数)查看</span>
<span class="n">search</span><span class="p">()</span>
<span class="c1">// 返回结果大致如下：</span>
<span class="c1">// [1] &quot;.GlobalEnv&quot;        &quot;package:stats&quot;     &quot;tools:RGUI&quot;  ...</span>
<span class="c1">// ...</span>
<span class="c1">// search 返回 R 运行环境的搜索路径，因此不仅包括 package ，也包括一些会用到的工具，如 GUI 图形界面等</span>
</pre></div>


<h4>3. 载入需要的 package:</h4>
<div class="highlight"><pre><span class="c1">// 现在需要载入电脑中已安装但是未被加载近来的 package</span>
<span class="k">library</span><span class="p">(</span><span class="k">package</span> <span class="o">=</span> <span class="s">&quot;survival&quot;</span><span class="p">)</span>
<span class="c1">// 或简写为</span>
<span class="k">library</span><span class="p">(</span><span class="n">survival</span><span class="p">)</span>
<span class="o">--</span> <span class="err">载入需要的程辑包：</span><span class="n">splines</span> <span class="o">--</span>
<span class="c1">// 同时也会载入其依赖的 package</span>
</pre></div>


<h4>4. (从运行环境中)移除不需要的 package:</h4>
<div class="highlight"><pre><span class="c1">// 当不再需要某些包可以从运行环境中移除:</span>
<span class="n">detach</span><span class="p">(</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;package:survival&quot;</span> <span class="p">)</span>
<span class="c1">// 或简写为:</span>
<span class="n">detach</span><span class="p">(</span><span class="s">&quot;package:splines&quot;</span><span class="p">)</span>
<span class="c1">// 如果安装了 lsr 这个包，可以更方便地移除:</span>
<span class="n">unlibrary</span><span class="p">(</span> <span class="n">survival</span> <span class="p">)</span>
</pre></div>


<h4>5. 下载并安装新的 packages:</h4>
<p>以天朝尤其是校园网的网速，如果选用默认的镜像下载，很有可能遇到意想不到惊喜，所以最好还是指定镜像来安装，<code>install.package()</code> 方法提供了一些参数，其中 <code>repos = ""</code> 指定镜像的 URL，<a href="http://cran.r-project.org/mirrors.html">官网</a>提供了很多可选镜像，我一般会选<a href="http://mirror.bjtu.edu.cn/cran/">http://mirror.bjtu.edu.cn/cran/</a>：</p>
<div class="highlight"><pre><span class="n">install</span><span class="p">.</span><span class="n">packages</span><span class="p">(</span> <span class="n">pkgs</span> <span class="o">=</span> <span class="s">&quot;car&quot;</span><span class="p">,</span> <span class="n">repos</span> <span class="o">=</span> <span class="s">&quot;http://mirror.bjtu.edu.cn/cran/&quot;</span><span class="p">,</span> <span class="n">dependencies</span> <span class="o">=</span> <span class="n">TRUE</span> <span class="p">)</span>
<span class="c1">// dependencies = TRUE 指定自动下载相关依赖，所以可能需要一定时间</span>
</pre></div>


<p>结果如下：</p>
<p><a href="/images/r-package.png" data-title="package installed" data-lightbox="example-set">
<img alt="package installed" src="/images/r-package.png" title="package" />
</a></p>
    </div>
    <!-- /.entry-content -->
</section>
        </section>
        <!--main content-->
    </div>
    <footer id="contentinfo" class="row">
        <address id="about" class="col-md-12">
            Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
            Theme based on <a href="http://bootswatch.com/paper">Bootstrap paper</a>.
        </address>
    </footer>
</div>

<!-- /#contentinfo -->
<script type="text/javascript" src="/theme/js/main.js"></script>
</body>
</html>